(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],{12:function(e,t,a){},14:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(7),r=a.n(s),i=(a(12),a(3)),l=a.n(i),o=a(6),u=a(4),d=(a(14),a(2)),j=a.n(d),m=function(e,t){var a=new Date(1e3*e),c=a.getTime(),n=6e4*a.getTimezoneOffset();return new Date(c+n+1e3*t)},h=function(){document.getElementById("alert").style.display="none"},b=a(0);var x=function(e){var t=e.weatherData,a="http://openweathermap.org/img/wn/"+"".concat(t.weather[0].icon,"@2x.png"),c=m(t.dt,t.timezone);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("article",{className:"container",children:[Object(b.jsxs)("div",{className:"weatherData",children:[Object(b.jsx)("h3",{className:"citytime",children:c.toLocaleTimeString("en-IN")}),Object(b.jsx)("h3",{className:"city",children:t.name+", "+t.sys.country})]}),Object(b.jsxs)("div",{className:"date",children:[Object(b.jsx)("h5",{className:"day",children:j()(c).format("D")}),Object(b.jsx)("h4",{className:"month",children:j()(c).format("MMMM")})]}),Object(b.jsxs)("div",{className:"weatherIcon",children:[Object(b.jsx)("span",{className:"temperature",children:t.main?Math.round(t.main.temp):"N/A"}),Object(b.jsx)("img",{src:a,alt:"weather status icon",className:"weather-icon"}),Object(b.jsx)("h2",{className:"description",children:t.weather?t.weather[0].description:"N/A"})]})]})})};var p=function(e){var t=e.weatherData,a=m(t.sys.sunrise,t.timezone),c=m(t.sys.sunset,t.timezone);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"extra-info",children:Object(b.jsx)("button",{id:"btnMore",onClick:function(){var e=document.getElementById("more"),t=document.getElementById("btnMore");"block"===e.style.display?(e.style.display="none",t.textContent="I want to know more \u25bc"):(e.style.display="block",t.textContent="Hide info \u25b2")},children:"I want to know more \u25bc"})}),Object(b.jsxs)("div",{className:"container more row",id:"more",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("ul",{className:"weather",children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"fas fa-cloud"}),"Cloudines:"," ",Object(b.jsx)("span",{children:t.clouds?t.clouds.all:"N/A"}),"%"]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"fas fa-thermometer-half"}),"Feels like:"," ",Object(b.jsx)("span",{children:t.main?Math.round(t.main.feels_like):"N/A"}),"\xb0C"]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"fas fa-tint"}),"Humidity:"," ",Object(b.jsx)("span",{children:t.main?Math.round(t.main.humidity):"N/A"}),"%"]})]})}),Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("ul",{className:"weather",children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"fas fa-wind"}),"Wind:"," ",Object(b.jsx)("span",{children:t.wind?t.wind.speed.toFixed(2):"N/A"}),"m/s"]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"far fa-sun"}),"Sunrise: ",Object(b.jsx)("span",{children:a.toLocaleTimeString("en-IN")})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("i",{className:"fas fa-sun"}),"Sunset: ",Object(b.jsx)("span",{children:c.toLocaleTimeString("en-IN")})]})]})})]})]})};var O=function(){var e="taipei";null!==localStorage.getItem("location")&&(e=localStorage.getItem("location"));var t=Object(c.useState)({}),a=Object(u.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(e),i=Object(u.a)(r,2),d=i[0],m=i[1],O="a76d48508fe6138cd94bde301b6926eb",f="https://api.openweathermap.org/data/2.5",g=Object(c.useState)("".concat(f,"/weather?q=").concat(e,"&appid=").concat(O,"&exclude=current&units=metric")),v=Object(u.a)(g,2),y=v[0],N=v[1],w=[];null!==localStorage.getItem("history")&&(w=localStorage.getItem("history").split(","));var I=Object(c.useState)(w),k=Object(u.a)(I,2),C=k[0],S=k[1];return Object(c.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(y);case 3:t=e.sent,e.t0=t.status,e.next=200===e.t0?7:401===e.t0?11:404===e.t0?12:429===e.t0?13:14;break;case 7:return e.next=9,t.json();case 9:return e.t1=e.sent,e.abrupt("return",{success:!0,data:e.t1});case 11:return e.abrupt("return",{success:!1,error:"Your API key is not activated"});case 12:return e.abrupt("return",{success:!1,error:"Your searched a wrong city name"});case 13:return e.abrupt("return",{success:!1,error:"Please consider upgrading to a subscription plan that meets your needs or reduce the number of API calls in accordance with the limits. (less than 60 API calls per minute)"});case 14:return e.abrupt("return",{success:!1,error:t.statusText});case 15:e.next=20;break;case 17:return e.prev=17,e.t2=e.catch(0),e.abrupt("return",{success:!1,error:e.t2.message});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}var a=function(){var t=Object(o.a)(l.a.mark((function t(){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:a=t.sent,s((function(e){return a})),c=document.getElementsByClassName("searchbar")[0],a.success?(c.value=a.data.name,null===localStorage.getItem("location")||localStorage.removeItem("location"),localStorage.setItem("location",a.data.name)):c.value="";case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();a();var c=setInterval(a,2e5);return function(){clearInterval(c)}}),[y]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"search",className:"searchbar transparent",placeholder:"Enter City...",value:d,onChange:function(e){m(e.target.value)}}),Object(b.jsx)("i",{className:"fas fa-map-marker-alt",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,a=e.coords.longitude;N("".concat(f,"/weather?lat=").concat(t,"&lon=").concat(a,"&appid=").concat(O,"&exclude=current&units=metric"))}))}}),Object(b.jsx)("button",{className:"search-btn transparent",onClick:function(){N("".concat(f,"/weather?q=").concat(d,"&appid=").concat(O,"&exclude=current&units=metric")),m("")},children:"GO"})]}),n.success?Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"ListContainer",children:[Object(b.jsx)("i",{className:"fas fa-history",onClick:function(){var e=document.getElementById("history");"flex"===e.style.display?e.style.display="none":e.style.display="flex"}}),Object(b.jsx)("div",{id:"history",children:C.length>0?C.map((function(e,t){return Object(b.jsx)("div",{className:"List",onClick:function(){return N("".concat(f,"/weather?q=").concat(e,"&appid=").concat(O,"&exclude=current&units=metric"))},children:e},t)})):Object(b.jsx)("div",{className:"noneHistory",children:"No History"})})]}),Object(b.jsx)(x,{weatherData:n.data}),Object(b.jsx)(p,{weatherData:n.data}),Object(b.jsx)("button",{className:"addList",onClick:function(){return e=n.data.name,console.log(C),S(C.slice(-4).concat(e)),null===localStorage.getItem("history")||localStorage.removeItem("history"),void localStorage.setItem("history",C.slice(-4).concat(e));var e},children:"+"})]}):Object(b.jsxs)("div",{className:"content alert",id:"alert",children:[Object(b.jsx)("span",{className:"closebtn",onClick:h,children:"\xd7"}),Object(b.jsx)("i",{className:"fas fa-exclamation-circle"})," ",n.error]})]}),Object(b.jsx)("footer",{children:Object(b.jsxs)("small",{children:[Object(b.jsxs)("div",{children:["last updated: ",j()().format("D MMMM YYYY h:mm:ss a")]}),Object(b.jsx)("div",{children:"created by Ying-Chieh Chen"})]})})]})},f=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),f()}},[[17,1,2]]]);
//# sourceMappingURL=main.88832e86.chunk.js.map